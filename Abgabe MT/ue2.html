<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="format.css">
<style type="text/css">
        <!--
                 a:link {font-family:Arial;        font-size:10pt;        text-decoration:none;}
                a:visited {font-family:Arial; font-size:10pt; text-decoration:none;}
                a:hover {color:#FF3333; text-decoration:none; font-weight:normal; font-size:10pt;}
        //-->
</style>
</head>

<body>

<iframe src="oben.html" width="800" height="120" name="IFrame3" id="IFrame3" scrolling="no" frameborder="0">
         <p>Ihr Browser kann leider keine eingebe5tteten Frames anzeigen:Sie k&ouml;nnen die eingebettete Seite &uuml;ber den
         folgenden.</p>
</iframe>

<h2>Übung 2</h2>
    <br>
    <h3>Aufgabe 1</h3>
    <p>Erzeuge aus den beiden JPG-Bildern, die dir geschickt wurden, Bitmap-Bilder (BMP) im Format 960x540
        Pixel, 24Bit. Die Konvertierung kann z.B. in Paint erfolgen.
        Benenne die Dateien "Nature_NameArbeitsgruppe.bmp" und Manmade_NameArbeitsgruppe.bmp". Schick mir
        die beiden BMP-Dateien unter Nennung deiner Arbeitsgruppe per
        Mail. In den folgenden Übungen wirst du diese Dateien oft als Ursprungsbilder verwenden. Sollten sie
        verloren gehen, kannst du sie notfalls wieder von mir erhalten. Darauf werde
        ich dir zwei BMP-Dateien mit Testbildern zusenden, die du bei den folgenden Aufgabenpunkten
        benötigst, gratingHXX.bmp und gratingVXX.bmp.
        Nun lies die Bilder mit bmp_io ein und erkläre die Angaben im Header, die auf der Konsole ausgegeben
        werden! Wie erklärt sich die Dateigröße für die beiden Dateien?</p>
    <p></p>
    <h6>Lösung</h6>
    <p></p>
    <p>Bearbeitete Manmade.bmp</p>
    <img src="pics/Ubung 2/raw/manmade_uebungsgruppe03.bmp">
    <p></p>
    <p>Bearbeitete Nature.bmp</p>
    <img src="pics/Ubung 2/raw/nature_uebungsgruppe03.bmp">
    <p></p>

    <p>grating_H8.bmp<br><br>
        Größe des Bildes in bytes: 921654<br>
        Anzahl der Bits für jeden Pixel RGB-Farbraum 8Bit pro Farbe: 24<br>
        Menge der Pixel in der Horizontalen: 640<br>
        Menge der Pixel in der Vertikalen: 480</p>

    <p>grating_V6.bmp<br><br>
        Größe des Bildes in bytes: 921654<br>
        Anzahl der Bits für jeden Pixel RGB-Farbraum 8Bit pro Farbe: 24<br>
        Menge der Pixel in der Horizontalen: 640<br>
        Menge der Pixel in der Vertikalen: 480</p>

    <p>Die Dateigröße entspricht:<br>
        (Breite in Pixeln * Höhe in Pixeln) * (Bits pro Pixel / 8) = Dateigröße</p>
	<h3>Aufgabe 2 - 2.2</h3>
        <p></p>
        <p>Auch bei der Bildabtastung muss das sogenannte Abtasttheorem eingehalten werden. Wie lautet es und wie lässt
            sich der Grenzfall, für den es gerade noch gilt, illustrieren
            (Zeichnung !)?</p>
        <p></p>
        <h6>Lösung</h6>
        <p></p>
        <img src="pics/Ubung 2/Abtast.bmp" alt="Bild konnte nicht geladen werden">
        <p>
            Es müssen mehr als 2 Pixel innerhalb einer Periode abgetastet werden,
            sodass das Ursprungssignal aus dem erhaltenen Signal ohne Informationsverlust
            wiederhergestellt werden kann.
        </p>
        <br>
        <h3>Aufgabe 2 - 2.3</h3>
        <p></p>
        <p>Erzeuge aus deinen eigenen Farbbildern Graustufen-Bilder. Dazu muss der Helligkeitswert Y aus den RGB-Werten
            errechnet werden. Es gibt dafür verschiedene Ansätze.
            Nutze die Formel Y= 0,3 x R + 0,6 x G + 0,1 x B, die die Helligkeitsempfindlichkeit des Auges annähert. Mit
            diesem Y-Wert wird dann die R, G und B-Information überschrieben.
            Speichere die Graustufenbilder ab.</p>
        <p></p>
        <h6>Lösung</h6>
        <p></p>
        <img src="pics/Aufgabe2/code/2.3.png" alt="Bild konnte nicht geladen werden"><br><br>
        <p></p>
        <img src="pics/Ubung 2/manmade2.3.bmp" alt="Bild konnte nicht geladen werden">
        <p></p>
        <img src="pics/Ubung 2/nature2.3.bmp" alt="Bild konnte nicht geladen werden">
        <p></p>
        <br>
        <h3>Aufgabe 2 - 2.4</h3>
        <p></p>
        <p> Erkläre, wie bei Bild- und Videoaufnahmen Aliasing entstehen kann. Ähnlich wie bei der 1. Übung am
            Audiosignal wollen wir auf das Bild ein Down-Sampling anwenden und
            sehen, wann dabei Aliasing auftritt. Beim Audiosignal haben wir jedes zweite Sample verworfen und damit die
            Abtastfrequenz halbiert. Beim Bild verringern wir die räumliche
            Auflösung, indem wir die Zahl der Bildzeilen bzw. Bildspalten verringern. Dabei wollen wir das Bild
            allerdings nicht verkleinern - was normalerweise die Folge wäre - sondern einfach
            die ungeradzahligen Spalten durch den Inhalt der geradzahligen Spalten ersetzen, d.h. Spalte 1 wird durch
            Spalte 0 ersetzt, Spalte 3 durch Spalte 2 etc. und analog für die Zeilen.
            Wenn das Ursprungsbild nun sehr feine Strukturen aufweist, wie in machen Testdateien, können
            Aliasing-Verzerrungen sichtbar werden. Achte darauf, dass stets Rot, Grün und
            Blau getrennt manipuliert werden müssen.</p>
        <p></p>
        <h6>Lösung</h6>
        <p></p>
        <p>
            Wenn feine Bildstrukturen wie Gitter, Haare oder andere Muster bei einer niedrigen Bildauflösung dargestellt
            werden, kommt es zu räumlichen Aliasing. Erkennbar ist es durch das Moiré-Muster, was sich dann dadurch
            bildet und sich durch heller und dunklere Bereiche auf dem gleichmäßigen Muster auszeichnet.
            Bei Videos kommt es zu einem zeitlichem Aliasing, wenn sich einzelne Pixel schneller ändern als die Bildrate
            es ermöglicht.
        </p>
        <br>
        <h3>Aufgabe 2 - 2.5</h3>
        <p></p>
        <p>
            Modifiziere bmp_io dahingehend, dass zunächst in jeder Zeile des eingelesenen Bilds jedes ungeradzahlige
            Pixel durch das davor liegende geradzahlige Pixel ersetzt wird
            (horizontales Down-Sampling). Diese Veränderung hat natürlich nur bei einem der beiden Testbilder Sinn
            (warum?). Speichere das resultierende Bild ab. Da sich die Bildgröße bei
            dieser Operation nicht ändert, muss der Bild-Header auch nicht verändert werden. Falls du im Ergebnis keine
            Veränderung sehen kannst, ersetze mehr Spalten, also Spalte 1 und 2
            durch Spalte 0, dann Spalte 1, 2 und 3 durch Spalte 0 usw. Wende diese Manipulation auf die Testbilder an,
            bis du eine Veränderung in Form eines Moiré-Musters siehst. Notiere,
            bei welcher Verringerung du die Veränderungen beobachtest und beschreibe die Veränderungen! Erkläre das
            Ergebnis an Hand der von dir bestimmten Periodendauer in Pixeln. Nun wende die Zeilenverringerung vertikal
            an, d.h. ersetze die Pixel jeder ungeradzahligen Zeile durch die der Zeile davor (vertikales Down-Sampling).
            Auch hier hat die
            Manipulation nur bei einer der Testdateien Sinn!
            Abschließend wendest du noch das horizontale Downsampling auf deine eigenen Bilder an, bis du eine sichtbare
            Verschlechterung beobachtest. Notiere auch hier, wann dies bei
            deinen beiden Bildern der Fall ist
        </p>
        <p></p>
        <h6>Lösung</h6>
        <p></p>
        <p>
            Horizontales:
        </p>
        <img src="pics/Ubung 2/downsamplingHorizontalcode.png" alt="Bild konnte nicht geladen werden">
        <p>
            Man erkennt schon bei einem Down-Sample-Wert von einem Pixel in horizontaler Orientierung eine leichte
            Veränderung.
        </p>
        <img src="pics/Ubung 2/H8_1Pixel_DownsamplingHorizontal.bmp" alt="Bild konnte nicht geladen werden">
        <br><br>
        <p>
            Bei einem weiterem Schritt (zwei Pixel) ist das Moiré-Muster stark zu sehen.
            Bei einem Down-Sample-Wert von zwei Pixeln erkennt man das Moiré-Muster.
        </p>
        <img src="pics/Ubung 2/H8_2Pixel_DownsamplingHorizontal.bmp" alt="Bild konnte nicht geladen werden">
        <br><br>
     
            _________________________________________________________________________________________________________________________________________________________________________________________________________
        </p>
        <p>
            Vertikales:
        </p>
        <img src="pics/Ubung 2/downsamplingvertikalcode.png" alt="Bild konnte nicht geladen werden">
        <br><br>
        <p>
            Bei einem Down-Sample-Wert von drei Pixeln erkennt man das Moiré-Muster.
        </p>
        <img src="pics/Ubung 2/V6_DownsamplingVertikal_3Pixel.bmp" alt="Bild konnte nicht geladen werden">
        <br>
        <h3>Eigene Bilder:</h3>
        <p>Nature - ab 5 Pixel deutlich verschlechtert</p>
        <img src="pics/Ubung 2/natureVerschlechtert.bmp" alt="Bild konnte nicht geladen werden">
        <p></p>
        <p>Manmade - ab 5 Pixeln deutlich verschlechtert</p>
        <img src="pics/Ubung 2/manmade_verschlechtert.bmp" alt="Bild konnte nicht geladen werden">

<h3>Aufgabe 3 - 3.1</h3>
    <p></p>
    <p>
        Wir wollen nun bmp_io so modifizieren, dass wir die Bitzahl reduzieren können.
        <br>Dazu können wir z.B. alle RGB-Werte durch eine Potenz von 2 teilen (Integer-Division ohne
        Rest).<br>
        Damit das resultierende Bild nicht dunkler wird als das Original, kompensieren wir die Operation
        durch Multiplikation mit derselben Zweierpotenz.<br> Zu beachten: Der Datentyp
        hat nach wie vor eine Bittiefe von 24Bit (8bit pro Farbe!)<br>
    </p>
    <p></p>
    <h6>Lösung</h6>
    <p></p>
    <img src="pics/Ubung 2/3.1_Bitreduzierung_Code.png" alt="Bild konnte nicht geladen werden">
    <p></p>
    <br>
    <h3>Aufgabe 3 - 3.2</h3>
    <p></p>
    <p>Mit dem entstandenen Programm verändern wir die in Aufgabe1 erzeugten BMP-Dateien. Ab welcher Bitzahl tritt beim
        Detail-Bild und beim Flächen-Bild eine sichtbare
        Verschlechterung der Qualität ein? Wie kann man diese Verschlechterung am besten beschreiben? (Alle
        Ergebnisbilder ins Übungsprotokoll)</p>
    <p></p>
    <h6>Lösung</h6>
    <p></p>
    <p>manmade 1-8 bits reduziert</p>
    <img src="pics/Ubung 2/bitreducted/manmade/1m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/manmade/2m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/manmade/3m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/manmade/4m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/manmade/5m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/manmade/6m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/manmade/7m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/manmade/8m.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <p></p>
    <p>nature 1-8 bits reduziert</p>
    <img src="pics/Ubung 2/bitreducted/nature/1n.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/nature/2n.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/nature/3n.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/nature/4n.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/nature/5n.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/nature/6n.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/nature/7n.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/nature/8n.bmp" alt="Bild konnte nicht geladen werden"><br><br>

    <p>
        Bei einer Bitreduzierung von 4Bit kann man eine klare Verschlechterung der Qualität beobachten.
        Die Verschlechterung ist bei weichen Farbübergängen und geringer Farbvielfalt besser zu erkennen,
        weil bei der Bitreduzierung der Farbraum kleiner wird.
    </p>
    <br>
    <h3>Aufgabe 3 - 3.3</h3>
    <p></p>
    <p>Modifiziere dein Programm noch einmal so, dass auch das Differenzbild zwischen Original und bitreduziertem Bild,
        das heißt das Fehlerbild ausgegeben, werden kann. Beachte
        dabei, dass bei der Differenzbildung negative und positive Werte auftreten können. Diese müssen wieder in den
        Wertebereich 0...255 transformiert werden, d.h. auf den Mittelwert
        127 gebracht werden (wie?). Dabei musst du auch bedenken, dass z.B. bei 1 Bit Reduzierung der Fehler nur 0, 1
        oder -1 wäre. Dieser Wertebereich wäre viel zu klein, als dass man
        ihn in der 8bit-Grafik noch sehen könnte. Daher muss der Fehler durch Multiplikation mit einer 2er Potenz
        verstärkt werden. In anderen Worten: Hat man vorher durch 2^n geteilt,
        sollte man das Differenzsignal vor dem Abspeichern mit 2^(8-n-1) multiplizieren. So ist sichergestellt, dass der
        Verstärkungsfaktor mit der Anzahl der gelöschten Bits kleiner wird
        (Bilder all dieser Fälle ins Übungsprotokoll)</p>
    <p></p>
    <h6>Lösung</h6>
    <p></p>
    <img src="pics/Ubung 2/3.3_BitreduzierungCode.png" alt="Bild konnte nicht geladen werden">
    <p></p>
    <p>manmade 1-8 bits differenz</p>
    <img src="pics/Ubung 2/bitreducted/error/8mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/7mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/6mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/5mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/4mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/3mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/2mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/1mm.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <p></p>
    <p>nature 1-8 bits differenz</p>
    <img src="pics/Ubung 2/bitreducted/error/8nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/7nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/6nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/5nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/4nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/3nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/2nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>
    <img src="pics/Ubung 2/bitreducted/error/1nn.bmp" alt="Bild konnte nicht geladen werden"><br><br>

</body>
</html>